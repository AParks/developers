---
layout: plugin-nav-bar
group: api
subgroup: zengine
---

<h1 id="message">znMessage</h1>
<p> A factory that displays a temporary alert message at the top of the page.</p>
<samp><h4>znMessage(message, [type], [duration])</h4></samp>
{% highlight javascript %}
// Example controller including the 'znMessage' service.
plugin.controller('MyCntl', ['$scope', 'znMessage', function($scope, znMessage) {
    $scope.onSubmit = function() {
        znMessage('Your data was saved!', 'saved');
    };
}]);
{% endhighlight %}
<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Param</th>
            <th>Type</th>
            <th>Details</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>message</td>
            <td><code>string</code></td>
            <td>
                The message to display.
            </td>
        </tr>
        <tr>
            <td>type (optional)</td>
            <td><code>string</code></td>
            <td>
                Determines the background color of the message. Valid types: 'info', 'saved', 'error', 'warning'. Default is 'info'.
            </td>
        </tr>
        <tr>
            <td>duration (optional)</td>
            <td><code>integer</code></td>
            <td>
                How long the message is displayed in milliseconds. Default is 4000.
            </td>
        </tr>
    </tbody>
</table>

Forces any open messages to close.
<samp><h4>znMessage(false);</h4></samp>


<h1 id="confirm">znConfirm</h1>
<p>A factory that displays a confirmation dialog.</p>
<samp><h4>znConfirm(message, [callback])</h4></samp>
{% highlight javascript %}
var close = function() {
    console.log('Closed');
};
znConfirm('Are you sure you want to close?', close);
{% endhighlight %}
<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Param</th>
            <th>Type</th>
            <th>Details</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>message</td>
            <td><code>string</code></td>
            <td>
                The message to display in the dialog.
            </td>
        </tr>
        <tr>
            <td>callback (optional)</td>
            <td><code>function</code></td>
            <td>
                If defined, will add a 'Yes' button to the dialog, which when clicked, will execute the callback.
            </td>
        </tr>
    </tbody>
</table>
<h1 id="znModal">znModal</h1>
<p>A factory that displays a modal dialog.</p>
<samp><h4>znModal(options)</h4></samp>
{% highlight javascript %}
plugin.controller('myMainCntl', ['$scope', 'znModal', function($scope, znModal) {
    $scope.onSubmit = function() {
        znModal({
            title: 'My Modal Dialog',
            template: "<form ng-controller='myModalCntl' name='myForm'><input name='input' required></form>",
            classes: 'my-dialog',
            btns: {
                'Save': {
                    primary: true,
                    action: function(scope) {
                        // on Save click
                    }
                },
                'Delete': {
                    danger: true,
                    action: function() {
                        // on Delete click
                    }
                }
            }
        });
    };
}]);
/*
 * For enhanced control over modal buttons
*/
plugin.controller('myModalCntl', ['$scope', function($scope) {
    $scope.setBtnAction('Save', function (callback) {

        // See https://code.angularjs.org/{{site.angularVersion}}/docs/api/ng/directive/form for more details
        var form = $scope.myForm; // value of the name attribute on the form. 

        if (!form.$valid) { // e.g. empty input
            return false; // do nothing
        }

        var keepOpen = false; // close the modal afterwards
        callback($scope, keepOpen); // call the original callback with $scope passed to it
    });
}]);
{% endhighlight %}
<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Param</th>
            <th>Type</th>
            <th>Details</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>options</td>
            <td><code>object</code></td>
            <td>
                <p>The object has following properties:</p>
                <ul>
                    <li><strong>title</strong> (string) The dialog title. </li>
                    <li><strong>template</strong> (string) Raw HTML to display as the dialog body. </li>
                    <li><strong>templateUrl</strong> (string) Script tag id of template. Takes precedence over the template property.</li>
                    <li><strong>classes</strong> (string) One or more (space-separated) CSS classes to add to the dialog. </li>
                    <li><strong>closeButton</strong> (bool) - A close button is included by default. Passing <code>false</code> won't include it. </li>
                    <li><strong>unique</strong> (bool | string) Whether to close any other open dialogs. <code>true</code> means close any other dialogs. Alternatively, a CSS class name can be passed to close related dialogs. </li>
                    <li><strong>btns</strong> (object) An object hash of buttons to include. Each button is a key-value pair, where the key is name used for the button text, and the value is a hash object that can include the following properties:
                        <ul>
                            <li>
                                one of three possible keys to determine background color: <code class="btn-success">success</code>, <code class="btn-danger">danger</code>, or <code class="btn-primary">primary</code>.
                            </li>
                            <li>
                                <code>action</code> callback to run when the button is clicked. By default, the action callback is called with no arguments, but this can be enhanced by calling the function <code>setBtnAction(name, onClick)</code>, which is available on the modal scope (more detail on modal scope below). The first argument, <code>name</code>, is the name of the button specified as the key in the <code>btns</code> hash. The second argument, <code>onClick</code>, is a function that is called on click of the button, instead of the original callback. When called, <code>onClick</code> is passed a wrapper function that takes two arguments: <code>data</code> and <code>keepOpen</code>. When the wrapper function is called within the <code>onClick</code> function, it calls the original <code>action</code>callback with its first argument <code>data</code>, and unless <code>keepOpen</code> is true, closes the modal.
                            </li>
                        </ul>
                    <li><strong>scope</strong> (object) - This property determines which scope to use in the modal template. (If you are familiar with Angular, this property is similar to how the scope property works with a directive.) There are three options for the scope to be used:
                        <ul>
                            <li>By default, the modal creates a child scope, which prototypically inherits from the $rootScope.</li>
                            <li>To create a child scope, which prototypically inherits from a different parent (i.e. the scope where the modal is being used), you can pass a reference like this: <code>scope: $scope</code>.</li>
                            <li>To create an isolated scope, which does not prototypically inherit, so that it is completely isolated from its parent, you can pass an object like this: <code>scope: { ... } </code>.
                            </li>
                        </ul>
                    The modal makes available on its scope the function <code>setBtnAction</code>, which can be used as a wrapper for the action callbacks.
                </ul>
            </td>
        </tr>
    </tbody>
</table>
<h1 id="plugin_events">znPluginEvents</h1>
<p>znPluginEvents is service that acts as a wrapper for the <a href="https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$on">Angular pub-sub system</a>, and is meant for communication between plugins and the core app. There are several events that are broadcasted at certain times, and can be listened for through <code>znPluginEvents.$on</code>. Likewise, the app has some event listeners registered, and can be triggered through <code>znPluginEvents.$broadcast</code>.</p>

<strong>Broadcasted Events:</strong>
<ul>
<li>zn-data-view-deleted</li>
<li>zn-data-view-saved</li>
<li>zn-data-view-loaded</li>
<li>zn-data-panel-record-loaded</li>
</ul>

<strong>Event Listeners:</strong>
<ul>
    <li>zn-data-column-resize</li>
</ul>

<h1 id="data">znData</h1>
<p>The znData factory provides a <a href="#available_resources">collection of resources</a> that should be used for accessing data via the {{site.productName}} <a href="{{site.baseurl}}/rest-api/resources">REST API</a>. After passing the name of the resource to the service, you get back an object that can use any of the four methods described below. All four methods return a standard <a href="https://docs.angularjs.org/api/ng/service/$q">Angular promise object</a>.
</p>
    
    <h4 id="get">get(params, successCallback, errorCallback)</h4>
    <p>Performs a <code>GET</code> request on a single object. The id param, if passed to <code>params</code>, will be interpreted as a url parameter.</p>
{% highlight js %}

// Get single workspace member
// equivalent to: GET /workspaces/123/members/456
// response will be a JSON Object
znData('WorkspaceMembers').get({ workspaceId:123, id:456 }, function(member) {
    $scope.member = member;
});
{% endhighlight %}

    <hr/>

    <samp><h4 id="query">query(params, successCallback, errorCallback)</h4></samp>
    <p>Performs a <code>GET</code> request on an array of objects. The id param, if passed to <code>params</code>, will be interpreted as a query parameter.</p>

{% highlight js %}
// Get list of workspace members
// equivalent to: GET /workspaces/123/members?id=456
// response will be an array
znData('WorkspaceMembers').query({ workspaceId:123, id: 456 }, function(members) {
    $scope.member = members[0];
});
{% endhighlight %}

    <hr/>

    <samp><h4 id="delete">delete(params, successCallback, errorCallback)</h4></samp>
    <p>Performs a <code>DELETE</code> request. Same as calling <samp>del(params, successCallback, errorCallback);</samp></p>

{% highlight js %}
// Delete a workspace member
// equivalent to: DELETE /workspaces/123/members/456
znData('WorkspaceMembers').delete({ workspaceId:123, id:456 }, function() {
    znMessage('Member removed from workspace', 'saved');
});
{% endhighlight %}

    <hr/>

    <samp><h4 id="save">save([params], data, successCallback, errorCallback)</h4></samp>
    <p> If <code>params</code> is present and contains the id param, performs a <code>PUT</code>. Otherwise performs a <code>POST</code>request.

{% highlight js %}
// Add a workspace member
// equivalent to: POST /workspaces/123/members
znData('WorkspaceMembers').save({ workspaceId:123 }, { 'inviteCode' : 123456 }, function(member) {
    $scope.member = member;
});

// Update a workspace member to be an admin
// equivalent to: PUT /workspaces/123/members/456
znData('WorkspaceMembers').save({ workspaceId:123, id:456 }, { 'role.id' : 2 }, function(members) {
    $scope.members = members;
});

// Make all admins of workspace 123 owners
// equivalent to: PUT /workspaces/123/members?role.id=1
znData('WorkspaceMembers').save({ workspaceId:123, 'role.id': 2 } , { 'role.id' : 1 }, function(members) {
    $scope.members = members;
});

{% endhighlight %}

    <table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Param</th>
            <th>Type</th>
            <th>Details</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>params (optional)</td>
            <td><code>object</code></td>
            <td>Optional if the resource has no required URL parameters and a <code>POST</code> is desired. Valid URL parameters are defined for each resource <a href="#available_resources">here</a>. If the <code>params</code>object is passed, any keys that aren't URL parameters are sent as <a href="{{site.baseurl}}/rest-api/conventions/querying-options/">query parameters</a> in the request. Some examples of valid query parameters are limit, related, sort, and attributes. If the id param is included in this object, a <code>PUT</code> is made. If not, a <code>POST</code> is made.
            </td>
        </tr>
        <tr>
            <td>data</td>
            <td><code>object</code></td>
            <td>Sent as the payload of the request.</td>
        </tr>
        <tr>
            <td>successCallback</td>
            <td><code>function(data, metaData, headers)</code></td>
            <td>
                <p>The function to execute if the request succeeds.</p>
                <ul>
                    <li><strong>data</strong> - The data of the response. </li>
                    <li><strong>metaData</strong> - An object containing the following info about the response:
                        <ul>
                            <li>status</li>
                            <li>code</li>
                            <li>totalCount</li>
                            <li>limit</li>
                            <li>offset</li>
                        </ul>
                        Click <a href="{{site.baseurl}}/rest-api/conventions/response-format">here</a> for more info about the response format.
                    </li>
                    <li><strong>headers</strong> - The HTTP response headers.</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td>errorCallback</td>
            <td><code>function(resp)</code></td>
            <td>
                <p>The function to execute if the request fails. Click <a href="{{site.baseurl}}/rest-api/conventions/response-format/#failure">here</a> for more info about the format of the failure response.</p>
            </td>
        </tr>
    </tbody>
</table>

<h4 id="available_resources">Available Resources</h3>
<p>The parameterized URL is used to query the {{site.productName}} <a href="{{site.baseurl}}/rest-api/resources">REST API</a>. For example, if the resource name is <b>FormFields</b>, the parameterized URL is <b>/forms/:formId/fields/:id</b>. In this case, <code>formId</code> is a required URL paramter, and must be passed to the <code>params</code> argument of any <code>get()</code>, <code>query()</code>, <code>delete()</code>, or <code>save()</code> called on <code>znData('FormFields')</code>. The <code>id</code> parameter on the other hand, may or may not be passed, depending on whether the request is intended for a single object or multiple objects. 
This is true for the <code>id</code> parameter of any resource URL.</p>

<table class="table table-striped">
    <thead>
        <th>Resource Name</th>
        <th>Parameterized URL</th>
    </thead>
    <tbody>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/activities">Activities</a></td><td>/activities/:activityId</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/app_templates">AppTemplates</a></td><td>/app_templates/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/app_template_install_jobs">AppTemplateInstallJobs</a></td><td>/app_template_install_jobs/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/data_filters">DataFilters</a></td><td>/data_filters/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/data_views">DataViews</a></td><td>/data_views/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/events">Events</a></td><td>/events/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/files">Files</a></td><td>/files/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/forms">Forms</a></td><td>/forms/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/forms-records-permissions">DefaultFormPermissions</a></td><td>/forms/permissions</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/forms-form.id-records-permissions">FormRecordPermissions</a></td><td>/forms/:formId/records/permissions</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/forms-form.id-fields">FormFields</a></td><td>/forms/:formId/fields/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/forms-form.id-folders">FormFolders</a></td><td>/forms/:formId/folders/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/forms-form.id-records">FormRecords</a></td><td>/forms/:formId/records/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/forms-form.id-uploads">FormUploads</a></td><td>/forms/:id/uploads</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/notes">Notes</a></td><td>/notes/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/notes-note.id-replies">NoteReplies</a></td><td>/notes/:noteId/replies/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/users-user.id-notifications">Notifications</a></td><td>/notifications/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/users-user.id-notification_email">NotificationEmails</a></td><td>/notification_emails/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/plugins">Plugins</a></td><td>/plugins/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/">PluginWorkspaces</a></td><td>/plugins/:pluginId/workspaces/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/record_import_files">RecordImportFiles</a></td><td>/record_import_files/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/record_import_jobs">RecordImportJobs</a></td><td>/record_import_jobs/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/record_export_jobs">RecordExportJobs</a></td><td>/record_export_jobs/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/tasks">Tasks</a></td><td>/tasks/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/task_lists">TaskLists</a></td><td>/task_lists/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/task_priorities">TaskPriorities</a></td><td>/task_priorities</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/task_statuses">TaskStatuses</a></td><td>/task_statuses</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/users-user.id-task_preferences">TaskPreferences</a></td><td>/users/:userId/task_preferences</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/users">Users</a></td><td>/users/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/workspaces-workspace.id-roles">Roles</a></td><td>/workspaces/:workspaceId/roles/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/workspaces">Workspaces</a></td><td>/workspaces/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/workspace_copy_jobs">WorkspaceCopyJobs</a></td><td>/workspace_copy_jobs</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/workspaces-workspace.id-invitees">WorkspaceInvitees</a></td><td>/workspaces/:workspaceId/invitees/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/workspaces-workspace.id-members">WorkspaceMembers</a></td><td>/workspaces/:workspaceId/members/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/workspaces-workspace.id-plugins">WorkspacePlugins</a></td><td>/workspaces/:workspaceId/plugins/:id</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/workspaces-workspace.id-members-member.id-task_preferences">WorkspaceTaskPreferences</a></td><td>/workspaces/:workspaceId/members/:memberId/task_preferences</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/workspaces-workspace.id-logo">WorkspaceLogo</a></td><td>/workspaces/:workspaceId/logo</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/countries">Countries</a></td><td>/countries</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/states">States</a></td><td>/states</td></tr>
        <tr><td><a href="{{site.baseurl}}/rest-api/resources/#!/subscriptions">Subscriptions</a></td><td>/subscriptions/:id</td></tr>
    </tbody>
</table>